<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="author" content="Rojita Manandhar, Rumit Maharjan" />
  <link rel="icon" type="image/png" href="favicon/favicon-96x96.png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="stylesheet" href="css/blog-detail.css" />
  <title>Galaxic Portal - Blog</title>
</head>
<body>
    <div class="bg-overlay"></div>
  <header>
    <nav class="navbar">
      <div id="nav-logo">
        <img src="Galaxic Portal Logos/GalaxicPortal Logo T-Webicon.png" alt="Galaxic Portal Logo" />
      </div>
      <div id="nav-links">
        <a href="index.html"><i class="fa-solid fa-house"></i> Home</a>
        <a href="minecraft.html" class="active"><i class="fa-solid fa-cube"></i> Minecraft</a>
        <a href="gaming.html"><i class="fa-solid fa-gamepad"></i> Gaming</a>
        <a href="reviews.html"><i class="fa-solid fa-star"></i> Reviews</a>
        <a href="blog.html"><i class="fa-solid fa-book"></i> Blogs</a>
      </div>
      <div id="nav-settings">
        <i id="bar" class="fa-solid fa-bars"></i>
      </div>
      <div id="bar-settings">
        <a href="index.html"><i class="fa-solid fa-house"></i> Home</a>
        <a href="minecraft.html"  class="active"><i class="fa-solid fa-cube"></i> Minecraft</a>
        <a href="gaming.html"><i class="fa-solid fa-gamepad"></i> Gaming</a>
        <a href="reviews.html"><i class="fa-solid fa-star"></i> Reviews</a>
        <a href="blog.html"><i class="fa-solid fa-book"></i> Blogs</a>
        <a href="#"><i class="fa-solid fa-gear"></i> Settings</a>
      </div>
    </nav>
</header>
<div class="page-wrapper">
  <div class="ad-side ad-left">
    <div class="ad-placeholder">Ad Left</div>
  </div>

  <section class="blog-container">
    <div class="blog-header">
      <h1 id="blog-title">Loading...</h1>
      <p id="blog-subtitle"></p>
      <p id="blog-date"></p>
    </div>

    <img id="blog-image" src="" alt="Blog Image" class="blog-image" />

    <article id="blog-content"></article>
  </section>

  <div class="ad-side ad-right">
    <div class="ad-placeholder">Ad Right</div>
  </div>
</div>
     <footer>
      <div class="footer-links">
        <a href="index.html"><i class="fa-solid fa-house"></i> Home</a>
        <a href="minecraft.html"><i class="fa-solid fa-cube"></i>Minecraft</a>
        <a href="gaming.html"><i class="fa-solid fa-gamepad"></i> Gaming</a>
        <a href="reviews.html"><i class="fa-solid fa-star"></i> Reviews</a>
        <a href="blog.html"><i class="fa-solid fa-book"></i> Blogs</a>
      </div>
       <div class="minecraft-environment">
          <img class="steve" src="assets/steve.png" alt="Steve">
          <img class="alex" src="assets/alex.webp" alt="Alex">
          <img class="enderman" src="assets/EndermanCute.gif" alt="Enderman Cute">
          <div class="stone"></div>
          <div class="grass"></div>
      </div>
    </footer>
  <script src="script/script.js"></script>
  <script>
    const musicsBlog = [
        "musics/Exploring The Crystal Caves - Asher Fulero.mp3",
        "musics/Moonlight Magic - Asher Fulero.mp3",
        "musics/Sleep Music No. 1 - Chris Haugen.mp3",
        "musics/Tiburtina - Schwartzy.mp3"
    ];

        const music = new Audio();
        let currentTrack = parseInt(localStorage.getItem("musicIndex")) || 0;
        const savedTimeBlog = parseFloat(localStorage.getItem("musicTime")) || 0;
        const isMusicEnabled = localStorage.getItem("minecraft-music");

        music.volume = 0.5;
        music.src = musicsBlog[currentTrack];

        music.addEventListener("loadedmetadata", () => {
            music.currentTime = savedTimeBlog;

            if (isMusicEnabled === "true") {
                music.play();
            }
        });

        music.onended = () => {
            currentTrack = (currentTrack + 1) % musicsBlog.length;
            music.src = musicsBlog[currentTrack];
            music.play();
        };

        window.addEventListener("click", () => {
        const isMusicEnabled = localStorage.getItem("minecraft-music") === "true";
        if (isMusicEnabled && music.paused) {
            music.currentTime = savedTimeBlog;
            music.play();
        }
        });


        window.addEventListener("beforeunload", () => {
            localStorage.setItem("musicIndex", currentTrack);
            localStorage.setItem("musicTime", music.currentTime);
        });
</script>
 <script>
const params = new URLSearchParams(window.location.search);
const category = params.get("category");
const blogId = parseInt(params.get("id"));

const jsonMap = {
  minecraft: "data/minecraft.json",
  gaming: "data/gaming.json",
  reviews: "data/reviews.json",
  blogs: "data/blogs.json"
};
if (!jsonMap[category]) {
  document.body.innerHTML = "<h1>Invalid category!</h1>";
} else {
  fetch(jsonMap[category])
    .then(res => res.json())
    .then(data => {
      const blog = data.find(b => b.id === blogId);
      if (blog) {
        document.title = `${blog.title} - Galaxic Portal`;
        document.getElementById("blog-title").textContent = blog.title;
        document.getElementById("blog-subtitle").textContent = blog.subtitle;
        document.getElementById("blog-date").textContent = blog.date;
        document.getElementById("blog-image").src = blog.image;
        document.getElementById("blog-content").innerHTML = blog.content;
      } else {
        document.body.innerHTML = "<h1>Post not found!</h1>";
      }
    })
    .catch(err => {
      console.error("Error loading blog:", err);
      document.body.innerHTML = "<h1>Something went wrong!</h1>";
    });
}
</script>
</body>
</html>
